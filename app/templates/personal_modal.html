<dialog class="modal" id="personalModal" aria-labelledby="personalModalHeader" aria-hidden="true">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
        <div class="modal__header">
            <h2 class="modal__title" id="personalModalHeader">
                <span class="material-icons">person</span>
                Редактирование профиля
            </h2>
            <button class="modal__close" data-modal-close aria-label="Закрыть окно редактирования профиля">
                <span class="material-icons">close</span>
            </button>
        </div>
        
        <div class="modal__body">
            <form action="{{ url_for("user.profile") }}" method="post" class="modal__form">
                {{ form.hidden_tag() }}

                <div class="form__group">
                    <label for="update-email" class="form__label">
                        <span class="material-icons">email</span>
                        Email:
                    </label>
                    {{ form.email(value=current_user.email or "", class="form__input") }}
                </div>
                
                <div class="form__group">
                    <label for="update-username" class="form__label">
                        <span class="material-icons">account_circle</span>
                        Имя пользователя:
                    </label>
                    {{ form.username(value=current_user.username or "", class="form__input") }}
                </div>
                
                <div class="form__group">
                    <label for="update-phone" class="form__label">
                        <span class="material-icons">phone</span>
                        Телефон:
                    </label>
                    {{ form.phone(value=current_user.phone or "", class="form__input") }}
                </div>
                
                <div class="form__group">
                    <label for="update-new-password" class="form__label">
                        <span class="material-icons">lock</span>
                        Новый пароль (необязательно):
                    </label>
                    <div class="auth__password-wrapper">
                        {{ form.new_password(class="form__input") }}
                        <button type="button" class="auth__password-toggle" aria-label="Показать/Скрыть пароль">
                            <span class="material-icons">visibility</span>
                        </button>
                    </div>
                </div>
                
                <div class="form__group">
                    <label for="update-current-password" class="form__label">
                        <span class="material-icons">vpn_key</span>
                        Текущий пароль:
                    </label>
                    <div class="auth__password-wrapper">
                        {{ form.current_password(class="form__input") }}
                        <button type="button" class="auth__password-toggle" aria-label="Показать/Скрыть пароль">
                            <span class="material-icons">visibility</span>
                        </button>
                    </div>
                    <small class="form__hint">Обязателен для сохранения любых изменений</small>
                </div>
                
                <div class="modal__footer">
                    {{ form.submit(class="button button--accent") }}
                    <button type="button" class="product__button button--outline button--muted" data-modal-close>Отмена</button>
                </div>
            </form>
        </div>
    </div>
</dialog>
